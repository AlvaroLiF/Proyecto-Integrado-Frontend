<body>
  <app-header-order></app-header-order>
  <div class="content">
      <h1>Método de pago</h1>
      <div class="form-and-summary">
          <div class="payment-methods">
              <h2>Métodos de Pago</h2>
              <div *ngIf="paymentMethods && paymentMethods.length > 0; else noPaymentMethods">
                <app-payment-method-card
                *ngFor="let payment of paymentMethods"
                [payment]="payment"
                [isSelected]="payment.isSelected"
                (select)="selectPaymentMethod(payment)"
                (edit)="editPaymentMethod(payment)"
                (delete)="deletePaymentMethod(payment)">
            </app-payment-method-card>
              </div>
              <ng-template #noPaymentMethods>
                  <p>No hay métodos de pago registrados.</p>
              </ng-template>
              <button (click)="openModal(false)" class="btn btn-primary">+ Añadir Nuevo Método de Pago</button>
              <app-payment-method-modal
                [showModal]="showModal"
                [paymentMethodForm]="paymentMethodForm"
                (closeModalEvent)="closeModal()"
                (savePaymentEvent)="savePaymentMethod($event)">
            </app-payment-method-modal>
          </div>
          <div class="order-summary">
              <h2>Resumen</h2>
              <p>Subtotal de Artículos: {{ cart.totalPrice }}€</p>
              <hr class="separator">
              <h3>Total (Impuestos incluidos): {{ cart.totalPrice }}€</h3>
              <button (click)="finalizeOrder()">Pagar y finalizar</button>
          </div>
      </div>
  </div>

  <app-footer></app-footer>
</body>
